<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Workout Complete</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/all.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/exercise.css') }}">
</head>
<body>
  <div class="top-nav">
    <div class="page-width top-nav-inner">
      <div class="nav-links">
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('exercise.setup') }}">Plan another</a>
        <a href="{{ url_for('exercise.progress') }}">Progress</a>
        <a href="{{ url_for('exercise.workout_logs') }}">Workout Logs</a>
      </div>
      <div class="nav-links">
        <span class="pill">{{ state.difficulty|capitalize }} · {{ state.focus|capitalize }}</span>
      </div>
    </div>
  </div>

  <div class="exercise-shell">
    <div class="page-width">
      <header class="exercise-header">
        <div>
          <h1>Workout complete</h1>
          <p class="subheading">Nice work, {{ state.user }}.</p>
        </div>
      </header>

      <main class="exercise-main">
        <div class="card">
          <h2 class="section-title">Summary</h2>
          <p class="helper">Start: {{ started_display }} · End: {{ ended_display }} · Duration: {{ duration_minutes }} min</p>
          <ul class="list">
            {% for warmup in state.warmups %}
              <li>
                <strong>{{ warmup.name }}</strong>
                <span>
                  {% if warmup.duration_seconds >= 60 %}
                    {{ (warmup.duration_seconds / 60)|round(1) }} min
                  {% else %}
                    {{ warmup.duration_seconds }} sec
                  {% endif %}
                </span>
                {% if warmup.description %}<span>{{ warmup.description }}</span>{% endif %}
              </li>
            {% endfor %}
            {% for step in state.steps %}
              <li>
                <strong>{{ step.name }}</strong>
                {% if step.type == "break" %}
                  <span>{{ step.detail }}</span>
                {% else %}
                  <span>{{ step.reps }} reps</span>
                {% endif %}
                {% if step.description %}
                  <span>{{ step.description }}</span>
                {% endif %}
                {% if step.status %}
                  <span class="chip">{{ step.status|capitalize }}</span>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </div>

        <div class="card">
          <form action="{{ url_for('exercise.complete') }}" method="post" class="form-grid">
            <div>
              <span class="helper">Rate this workout</span>
              <div class="option-group" style="display:flex; gap:8px;">
                {% for val in [1,2,3,4,5] %}
                  <label style="padding:10px 12px; min-width:60px; justify-content:center;">
                    <input type="radio" name="rating" value="{{ val }}" {% if state.rating == val %}checked{% endif %}>
                    <span>{{ "★" * val }}</span>
                  </label>
                {% endfor %}
              </div>
            </div>
            {% if state.logged %}
              <p class="helper">Workout logged for reporting.</p>
            {% endif %}
            <div class="button-row">
              <button class="primary-button" type="submit">Complete workout</button>
            </div>
          </form>
        </div>
      </main>
    </div>
  </div>
</body>
</html>
